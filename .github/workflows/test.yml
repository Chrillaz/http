name: test

on:
    workflow_call:

jobs:
    test:
        name: Test
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v3

            - name: Read .nvmrc
              run: echo "NODE_VERSION=$(cat .nvmrc)" >>$GITHUB_OUTPUT
              id: nvm

            - uses: actions/setup-node@v3
              with:
                  node-version: '${{ steps.nvm.outputs.NODE_VERSION }}'
                  cache: npm

            - run: npm ci
            - run: npm test --coverage=false
